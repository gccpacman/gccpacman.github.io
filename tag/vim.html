<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <!-- Set the viewport width to device width for mobile -->
    <meta name="viewport" content="width=device-width" />

    <title>Pacman News - vim</title>

    <link rel="stylesheet" href="https://gccpacman.github.io/theme/css/normalize.css" />
    <link rel="stylesheet" href="https://gccpacman.github.io/theme/css/foundation.min.css" />
    <link rel="stylesheet" href="https://gccpacman.github.io/theme/css/style.css" />
    <link rel="stylesheet" href="https://gccpacman.github.io/theme/css/pygments.css" />	
    <script src="https://gccpacman.github.io/theme/js/modernizr.js"></script>
</head>

<body>

<!-- Nav Bar -->
<nav>
<div class="top-bar">
<div class="row">
    <div class="large-9 large-centered columns">
	    <h1><a href="https://gccpacman.github.io">Pacman News</a></h1>
    </div>
</div>
</div>

<!-- Show menu items and pages -->
<div class="row">
<div class="large-9 columns">
    <ul class="button-group navigation">

    </ul>
</div>
</div>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->
<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns">
        
        

            <article>
                <a href="https://gccpacman.github.io/vimcha-jian-command-tzai-windowsshang-bian-yi.html"><h3 class="article-title">vim插件command-t在windows上编译</h3></a>
<h6 class="subheader" title="2017-10-24T10:20:00+08:00">Tue 24 October 2017
</h6>


<p>用Bundle在Windows平台上配置成功了以后，绝大多数插件都已经可以使用，但是唯独<a href="https://github.com/wincent/Command-T">Command-T</a>因为是Ruby集成的插件，需要手动编译。</p>
<p><a href="https://github.com/wincent/command-t/blob/master/doc/command-t.txt">官方文档</a>写的安装编译过程代码大概是这样的，我省去了使用bundle的安装过程：</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/vim<span class="se">\b</span>undle<span class="se">\c</span>ommand-t<span class="se">\r</span>uby<span class="se">\c</span>ommand-t<span class="se">\e</span>xt<span class="se">\c</span>ommand-t&gt;
$ ruby extconf.rb
$ make
</pre></div>


<p>要完成这些肯定得装ruby和make，网上的绝大多数答案也都已经过期，说的是vim7.4左右的版本，而现在已经是vim 8.0。于是只好自己探索。</p>
<p>windows的ruby是一个特殊的安装包，和Ruby的官网都分开，网址是<a href="https://rubyinstaller.org/">RubyInstaller for windows</a>。</p>
<p>可供下载的版本从2.0.0-p648到2.4.2-2版本。</p>
<p>我从高版本开始尝试，安装2.4.2-2，安装成功并设置好windows环境变量，开始编译。结果发现报错 <code>You have to install development tools first.</code>. 于是我在官网发现了<code>DEVELOPMENT KIT</code>可以下载，但是居然只支持（Ruby 2.0 到 2.3），只好重新安装了Ruby 2.3, 并且按照官网development tools。</p>
<p>假设Ruby 安装到 C:\Ruby22-x64， 配置PATH环境变量。然后将Development tools 就解压到 C:\Ruby22-x64\DevKit, 然后进入该目录执行</p>
<div class="highlight"><pre><span></span>$ ruby dk.rb init
</pre></div>


<p>成功后再执行</p>
<div class="highlight"><pre><span></span>$ ruby dk.rb install
</pre></div>


<p>接着进入<code>~/vim\bundle\command-t\ruby\command-t\ext\command-t&gt;</code>文件夹，执行<code>ruby extconf.rb</code>命令，发现ruby执行成功了，用choco安装make并执行make一切都顺利。
但是进入vim一按command-t的快捷键报错，报错内容是：</p>
<div class="highlight"><pre><span></span>command-t.vim could not load the C extension
Please see INSTALLATION and TROUBLE-SHOOTING in the help
Vim Ruby version: 2.2.6
Expected version: 2.3.3
</pre></div>


<p>也就是vim内置的ruby版本和这个版本不匹配，看来我确实遗漏了vim内置版本的问题。于是继续降级到Ruby 2.2, 结果居然还是报错。报错内容依旧是<code>You have to install development tools first.</code> 然而我明明已经安装了development tools. </p>
<p>求助google，结果在<a href="https://github.com/OneClick/RubyInstaller/wiki/Development-Kit">RubyInstaller wiki</a>
有一段话是：</p>
<blockquote>
<p>The Hacky Developer Scenario – a developer building native gems wants to be able to quickly test that their extconf.rb file used to create a Makefile for the native library works correctly. To shorten the development cycle, the DevKit enables the developer to run <code>ruby -rdevkit extconf.rb</code>.</p>
</blockquote>
<p>于是我尝试带<code>-rdevkit</code>参数执行extconf.rb，结果果然通过了，但是make命令却无法通过。继续搜索，发现[AskUbuntu]上有个command-t的问题，没有用官方文档的方法编译command-t而是用了<code>rake make</code>来编译，我知道rake是ruby的一个工具，在jekyll尝试搭博客的时候用到，但不知道原理。但是反正是编译只要过了就行，于是我就尝试执行<code>rake make</code>结果还是不信，报错<code>You have to install development tools first.</code>，但是这样我没有理由不去尝试帮<code>rake make</code> 带上<code>-rdevkit</code>这样一个参数，结果居然真的成功了。</p>
<p>于是迫不及待打开vim，按下command-t的快捷键，一个漂亮的弹窗弹了出来。试着敲了几行，好像没有什么问题，大功告成。</p>
<p><img alt="Command-T on Windows" src="https://gccpacman.github.io/images/command_t1.png"></p><p class="subheader">Category: <a href="https://gccpacman.github.io/category/vim.html">Vim</a>

    Tagged: 
    <a href="https://gccpacman.github.io/tag/windows.html">windows </a>
    <a href="https://gccpacman.github.io/tag/vim.html">vim </a>
</p>



            </article>


                <hr  class="gradient"/>


        


            <article>
                <a href="https://gccpacman.github.io/windowsde-bao-guan-li-chocolatehe-vimvundle.html"><h3 class="article-title">windows的包管理Chocolate和vim.Vundle</h3></a>
<h6 class="subheader" title="2017-10-22T10:20:00+08:00">Sun 22 October 2017
</h6>


<p>Windows的开发环境一直都会让人比较头疼，一般解决方法有用Cygwin等模拟Linux的环境，Windows 10又自带了Ubuntu On Windows 10的环境。但是都或多或少有点问题，例如Cygwin的文件目录和windows分离，Ubuntu On Windows 10不能用Nodejs，打开X应用比较麻烦，只能用终端等。</p>
<p>经过很多尝试，我认为最友好的环境还是windows原生的环境，只是你需要偶尔告别命令行搜索某些应用需要的依赖，依次安装，这样其实绝大多数的开发环境都是可以部署的。不过还是有工具可以帮助我们，例如Windows其实也有一个类似apt-get或者<a href="https://brew.sh/">Homebrew</a>的包管理工具，叫做<a href="https://chocolatey.org/">Chocolate</a>.</p>
<p><a href="https://chocolatey.org/install">安装Chocolate</a>只要在Powershell里写这行代码即可：</p>
<div class="highlight"><pre><span></span>Set-ExecutionPolicy Bypass; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))
</pre></div>


<p>安装包的方法是<code>choco install &lt;package_name&gt;</code> 但是这个命令必须用admin权限的powershell来执行。于是想是不是有个windows的<code>sudo</code>，结果一查还真的有，而且可以用chocolate安装 …</p><p class="subheader">Category: <a href="https://gccpacman.github.io/category/vim.html">Vim</a>

    Tagged: 
    <a href="https://gccpacman.github.io/tag/windows.html">windows </a>
    <a href="https://gccpacman.github.io/tag/vim.html">vim </a>
</p>



                <a class="button radius secondary small right" href="https://gccpacman.github.io/windowsde-bao-guan-li-chocolatehe-vimvundle.html">Read More</a>
                <hr  class="gradient"/>
            </article>

            <!-- /#posts-list -->
<div class="pagination-centered">
<h6 class="subheader">Page 1 of 1</h6>

<p>

</p>
</div>

    </div>
    <!-- End Main Content -->

    <!-- Sidebar -->
    <aside class="large-3 columns">
        <h5 class="sidebar-title">Site</h5>
        <ul class="side-nav">
            <li><a href="https://gccpacman.github.io/archives.html">Archives</a>
            <li><a href="https://gccpacman.github.io/tags.html">Tags</a>
        </ul>

		
        <h5 class="sidebar-title">Categories</h5>
        <ul class="side-nav">
            <li><a href="https://gccpacman.github.io/category/kubernetes.html">Kubernetes</a></li>
            <li><a href="https://gccpacman.github.io/category/linux.html">Linux</a></li>
            <li><a href="https://gccpacman.github.io/category/python.html">python</a></li>
            <li><a href="https://gccpacman.github.io/category/tmux.html">Tmux</a></li>
            <li><a href="https://gccpacman.github.io/category/vim.html">Vim</a></li>
            <li><a href="https://gccpacman.github.io/category/windows.html">Windows</a></li>
   
        </ul>

        <h5 class="sidebar-title">Links</h5>
        <ul class="side-nav">
            <li><a href="http://getpelican.com/">Pelican</a></li>
        </ul>
		
        <h5 class="sidebar-title">Social</h5>
        <ul class="side-nav">
            <li><a href="https://github.com/gccpacman">GccPacman @Github</a></li>
            <li><a href="https://stackoverflow.com/users/4124310/realhu">r341h @StackOverflow</a></li>
        </ul>

    </aside> <!-- End Sidebar -->

</div> <!-- End Main Content and Sidebar -->


<!-- Footer -->
<footer class="row">
    <div class="large-12 columns">
        <hr />
        <div class="row">
            <div class="large-6 columns">
              <!--                  <p>Pacman News by r341h</p> -->
            </div>
            </div>
    </div>
</footer>
</body>
</html>