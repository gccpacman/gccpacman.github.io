<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Pacman News</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Pacman News Atom Feed" />
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">Pacman News </a></h1>
                <nav><ul>
                    <li><a href="/category/linux.html">Linux</a></li>
                    <li><a href="/category/python.html">python</a></li>
                    <li><a href="/category/vim.html">Vim</a></li>
                    <li><a href="/category/windows.html">Windows</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/zi-yuan-zhan-yong-chao-ji-di-de-i3zhuo-mian.html">资源占用超级低的i3桌面</a></h1>
<footer class="post-info">
        <abbr class="published" title="2018-05-04T10:20:00+08:00">
                Published: Fri 04 May 2018
        </abbr>
		<br />
        <abbr class="modified" title="2018-05-04T19:30:00+08:00">
                Updated: Fri 04 May 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/r341h.html">r341h</a>
        </address>
<p>In <a href="/category/vim.html">Vim</a>.</p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/vim.html">vim</a> <a href="/tag/gtk.html">gtk</a> <a href="/tag/vitual-machine.html">vitual machine</a> </p>
</footer><!-- /.post-info --><p>现在的电脑是Surface，跑虚拟机很吃力了，但是不是不能跑，重点是优化后把linux的资源降下来，还是可以非常流畅。i3是个比xfce4更加轻量级的桌面管理器，而且不是像Windows那样悬浮窗口式的，而是tiling的桌面。随便网上找了个截图，大概就是这个意思：</p>
<p><img alt="i3" src="https://i3wm.org/screenshots/i3-1.png"></p>
<h1>这边的例子以Vmware为例：</h1>
<h2>1. 首先要安装i3：</h2>
<div class="highlight"><pre><span></span>$ sudo yum install i3   <span class="c1"># centos</span>
$ sudo apt install i3   <span class="c1"># debian &amp; ubuntu</span>
$ sudo pacman -S i3     <span class="c1"># archlinux</span>
</pre></div>


<h2>2. 备份并修改i3的配置文件，可以参考我的github，或者直接下载替换：</h2>
<div class="highlight"><pre><span></span>cp ~/.config/i3/config ~/.config/i3/config.bak
wget https://raw.githubusercontent.com/gccpacman/vm-i3wm-config/master/config
cp config ~/.config/i3/config
</pre></div>


<h2>3. 因为我的是高分屏，默认vmware不支持，但是可以修改i3的dpi让文字和界面看起来舒服：</h2>
<div class="highlight"><pre><span></span>echo &quot;Xft.dpi: 118&quot; &gt;&gt; ~/.Xresources
</pre></div>


<h2>4 安装lightdm/gdm后，，设置session成i3，并且因为是虚拟机不想每次开机都输入用户名密码，可以设置自动登陆：</h2>
<p><code>lightdm</code>修改<code>/etc/lightdm/lightdm.conf</code>:</p>
<div class="highlight"><pre><span></span><span class="k">[SeatDefaults]</span>
<span class="na">autologin-user</span><span class="o">=</span> <span class="s">{{your username}}</span>
<span class="na">autologin-user-timeout</span><span class="o">=</span><span class="s">0</span>
<span class="na">user-session</span><span class="o">=</span><span class="s">i3</span>
</pre></div>


<p><code>gdm</code>修改<code>/etc/gdm3/daemon.conf</code>:</p>
<div class="highlight"><pre><span></span><span class="k">[daemon]</span>
<span class="na">AutomaticLoginEnable</span><span class="o">=</span><span class="s">true</span>
<span class="na">AutomaticLogin</span><span class="o">=</span><span class="s">teotfw</span>
</pre></div>


<p>PS: 或者直接disable x-manager, 用startx方式启动</p>
<div class="highlight"><pre><span></span>sudo systemctl set-default multi-user.target
echo &quot;exec i3&quot; &gt; ~/.xinitrc
startx # reboot并login后执行
</pre></div>


<h2>5. 根据你的系统安装open-vm-tools</h2>
<div class="highlight"><pre><span></span>$ sudo yum install open-vm-tools   <span class="c1"># centos</span>
$ sudo apt install open-vm-tools   <span class="c1"># debian &amp; ubuntu</span>
$ sudo pacman -S open-vm-tools     <span class="c1"># archlinux</span>
</pre></div>


<h2>6. 如果你无法加载open-vm-tools, 则需要做如下配置：</h2>
<div class="highlight"><pre><span></span>cp ~/.xsession ~/.xsession.bak
echo &quot;#!/bin/sh
xrandr
exec i3&quot; &gt; ~/.xsession
</pre></div>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/windowsan-zhuang-msys32pei-zhi-gitdeng-kai-fa-huan-jing-bing-ji-cheng-vscode.html" rel="bookmark"
                           title="Permalink to Windows安装MSys32配置Git等开发环境并集成VSCode">Windows安装MSys32配置Git等开发环境并集成VSCode</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2018-02-01T10:20:00+08:00">
                Published: Thu 01 February 2018
        </abbr>
		<br />
        <abbr class="modified" title="2018-02-01T19:30:00+08:00">
                Updated: Thu 01 February 2018
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/r341h.html">r341h</a>
        </address>
<p>In <a href="/category/windows.html">Windows</a>.</p>
<p>tags: <a href="/tag/windows.html">windows</a> <a href="/tag/shell.html">shell</a> </p>
</footer><!-- /.post-info -->                <p>在不久之前发现了Msys2，基于Cygwin但是却又有一个让我觉得无比美好的包管理器Pacman(和Arch Linux的一样)，于是决定试试。但是真的用于Windows的终端还有很多麻烦的地方要解决，主要是以下几点：
1. Git的ssh_keygen配置，你和windows自己的CMD里的ssh_keygen能否共用
2. Msys用的换行符是和Linux一样的LF，而Windows的是CRLF
3. Python能不能直接用Windows的Python而不用模拟Unix环境的Python（有很多的bug）
4. 能否和我目前用的最多的VSCode编辑器无缝集成</p>
<p>经过一段时间的研究，每个问题都得到了很好的解决，目前来讲非常的完美，在这里分享一下：</p>
<ol>
<li>
<p>下载并安装 <a href="http://www.msys2.org/">Msys2</a></p>
</li>
<li>
<p>安装和配置 <code>git</code>, 配置在windows上check出crlf格式文本，提交lf格式:</p>
<p>2.1 安装git：</p>
<div class="highlight"><pre><span></span>$ pacman --needed -S bash pacman msys2-runtime  git
</pre></div>


<p>2.2 修改git处理回车的方式：</p>
<div class="highlight"><pre><span></span>$ git config --global core.autocrlf <span class="nb">true</span>
</pre></div>


</li>
<li>
<p>修改Home目录路径, Msys2默认的Home目录是Mingw64的/home …</p></li></ol>
                <a class="readmore" href="/windowsan-zhuang-msys32pei-zhi-gitdeng-kai-fa-huan-jing-bing-ji-cheng-vscode.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/linuxxiu-mian-hou-huan-xing-wifihe-lan-ya-wu-fa-zheng-chang-shi-yong-de-jie-jue-fang-fa.html" rel="bookmark"
                           title="Permalink to Linux休眠后唤醒，wifi和蓝牙无法正常使用的解决方法">Linux休眠后唤醒，wifi和蓝牙无法正常使用的解决方法</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-12-04T10:20:00+08:00">
                Published: Mon 04 December 2017
        </abbr>
		<br />
        <abbr class="modified" title="2017-12-04T19:30:00+08:00">
                Updated: Mon 04 December 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/r341h.html">r341h</a>
        </address>
<p>In <a href="/category/linux.html">Linux</a>.</p>
<p>tags: <a href="/tag/linux.html">linux</a> <a href="/tag/drivers.html">drivers</a> </p>
</footer><!-- /.post-info -->                <p><code>Manjaro Linux</code>从<code>17.02</code>版本开始匹配了Surface Pro 3， 这里必须非常感谢下Manjaro Team的工作，我现在可以再次在Surface上用畅快的用Linux了。</p>
<p>具体可以看reddit上的这篇文章： https://cd-rw.org/t/running-linux-on-the-surface-pro-3/175/37。</p>
<p>我实际安装的版本是<code>17.1pre3</code>，不管是蓝牙，触摸板，WIFI，touchpad，音量键，甚至触摸屏都可以正常使用，甚至都不用升级内核。</p>
<p>唯一的问题是启用休眠以后，wifi和蓝牙功能失灵了，即使通过重启<code>NetworkManager.service</code>也无法解决，因此基本上就是硬件驱动的问题，网上关于其他一些笔记本在休眠后无法解决的问题基本上就是用lsmod查到和wifi相关的模块，然后重新加载的方法，但是没有和surface pro有关的内容。</p>
<p>找了几篇stackoverflow文章做了多次尝试，然后通过<code>lsmod　| grep wifi</code>和<code>lsmod | grep bluetooth</code>查出来的模块 …</p>
                <a class="readmore" href="/linuxxiu-mian-hou-huan-xing-wifihe-lan-ya-wu-fa-zheng-chang-shi-yong-de-jie-jue-fang-fa.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/vimcha-jian-command-tzai-windowsshang-bian-yi.html" rel="bookmark"
                           title="Permalink to vim插件command-t在windows上编译">vim插件command-t在windows上编译</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-10-24T10:20:00+08:00">
                Published: Tue 24 October 2017
        </abbr>
		<br />
        <abbr class="modified" title="2017-10-24T19:30:00+08:00">
                Updated: Tue 24 October 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/r341h.html">r341h</a>
        </address>
<p>In <a href="/category/vim.html">Vim</a>.</p>
<p>tags: <a href="/tag/windows.html">windows</a> <a href="/tag/vim.html">vim</a> </p>
</footer><!-- /.post-info -->                <p>用Bundle在Windows平台上配置成功了以后，绝大多数插件都已经可以使用，但是唯独<a href="https://github.com/wincent/Command-T">Command-T</a>因为是Ruby集成的插件，需要手动编译。</p>
<p><a href="https://github.com/wincent/command-t/blob/master/doc/command-t.txt">官方文档</a>写的安装编译过程代码大概是这样的，我省去了使用bundle的安装过程：</p>
<div class="highlight"><pre><span></span>$ <span class="nb">cd</span> ~/vim<span class="se">\b</span>undle<span class="se">\c</span>ommand-t<span class="se">\r</span>uby<span class="se">\c</span>ommand-t<span class="se">\e</span>xt<span class="se">\c</span>ommand-t&gt;
$ ruby extconf.rb
$ make
</pre></div>


<p>要完成这些肯定得装ruby和make，网上的绝大多数答案也都已经过期，说的是vim7.4左右的版本，而现在已经是vim 8.0。于是只好自己探索。</p>
<p>windows的ruby是一个特殊的安装包，和Ruby的官网都分开，网址是<a href="https://rubyinstaller.org/">RubyInstaller for windows</a>。</p>
<p>可供下载的版本从2.0.0-p648到2.4.2-2版本。</p>
<p>我从高版本开始尝试，安装2.4.2-2 …</p>
                <a class="readmore" href="/vimcha-jian-command-tzai-windowsshang-bian-yi.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/windowsde-bao-guan-li-chocolatehe-vimvundle.html" rel="bookmark"
                           title="Permalink to windows的包管理Chocolate和vim.Vundle">windows的包管理Chocolate和vim.Vundle</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-10-22T10:20:00+08:00">
                Published: Sun 22 October 2017
        </abbr>
		<br />
        <abbr class="modified" title="2017-10-22T19:30:00+08:00">
                Updated: Sun 22 October 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/r341h.html">r341h</a>
        </address>
<p>In <a href="/category/vim.html">Vim</a>.</p>
<p>tags: <a href="/tag/windows.html">windows</a> <a href="/tag/vim.html">vim</a> </p>
</footer><!-- /.post-info -->                <p>Windows的开发环境一直都会让人比较头疼，一般解决方法有用Cygwin等模拟Linux的环境，Windows 10又自带了Ubuntu On Windows 10的环境。但是都或多或少有点问题，例如Cygwin的文件目录和windows分离，Ubuntu On Windows 10不能用Nodejs，打开X应用比较麻烦，只能用终端等。</p>
<p>经过很多尝试，我认为最友好的环境还是windows原生的环境，只是你需要偶尔告别命令行搜索某些应用需要的依赖，依次安装，这样其实绝大多数的开发环境都是可以部署的。不过还是有工具可以帮助我们，例如Windows其实也有一个类似apt-get或者<a href="https://brew.sh/">Homebrew</a>的包管理工具，叫做<a href="https://chocolatey.org/">Chocolate</a>.</p>
<p><a href="https://chocolatey.org/install">安装Chocolate</a>只要在Powershell里写这行代码即可：</p>
<div class="highlight"><pre><span></span>Set-ExecutionPolicy Bypass; iex ((New-Object System.Net.WebClient).DownloadString(&#39;https://chocolatey.org/install.ps1&#39;))
</pre></div>


<p>安装包的方法是<code>choco install &lt;package_name&gt;</code> 但是这个命令必须用admin权限的powershell来执行。于是想是不是有个windows的<code>sudo</code>，结果一查还真的有，而且可以用chocolate安装 …</p>
                <a class="readmore" href="/windowsde-bao-guan-li-chocolatehe-vimvundle.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/uwsgifang-shi-qi-dong-django.html" rel="bookmark"
                           title="Permalink to uwsgi方式启动django">uwsgi方式启动django</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-11-23T10:20:00+08:00">
                Published: Mon 23 November 2015
        </abbr>
		<br />
        <abbr class="modified" title="2015-11-23T19:30:00+08:00">
                Updated: Mon 23 November 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/r341h.html">r341h</a>
        </address>
<p>In <a href="/category/python.html">python</a>.</p>
<p>tags: <a href="/tag/python.html">python</a> <a href="/tag/django.html">django</a> <a href="/tag/webapps.html">webapps</a> </p>
</footer><!-- /.post-info -->                <p>没人访问的博客也不是不能升级。不过最近有点懒，趁着睡不着搞了下<code>uwsgi</code>。
额。平台ubuntu, 你最好有个django项目，假设已经用了<code>virtualenv</code>，假设已经安装好<code>nginx</code>并启动服务。</p>
<p>1）首先安装<code>uwsgi</code>:  </p>
<div class="highlight"><pre><span></span>pip install uwsgi
</pre></div>


<p>2）然后启动， 指定端口号和进程号：</p>
<div class="highlight"><pre><span></span>uwsgi -s 127.0.0.1:38803 --http :8000 --module blog.wsgi
</pre></div>


<p>3) 配置nginx配置文件，放在<code>/etc/nginx/site-enabled/</code>目录下，注意如果你要用80端口，就不要和其他的例如默认的配置冲突，如果有个default的文件，应该是一个软连接，可以直接删掉。我就直接贴我自己的了：</p>
<div class="highlight"><pre><span></span><span class="nt">upstream</span> <span class="nt">django</span> <span class="p">{</span>
    <span class="err">server</span> <span class="err">127 …</span></pre></div>
                <a class="readmore" href="/uwsgifang-shi-qi-dong-django.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/my-super-post.html" rel="bookmark"
                           title="Permalink to My super title">My super title</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2010-12-03T10:20:00+08:00">
                Published: Fri 03 December 2010
        </abbr>
		<br />
        <abbr class="modified" title="2010-12-05T19:30:00+08:00">
                Updated: Sun 05 December 2010
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/alexis-metaireau.html">Alexis Metaireau</a>
                        <a class="url fn" href="/author/conan-doyle.html">Conan Doyle</a>
        </address>
<p>In <a href="/category/python.html">Python</a>.</p>
<p>tags: <a href="/tag/pelican.html">pelican</a> </p>
</footer><!-- /.post-info -->                <p>Short version for index and feeds</p>
                <a class="readmore" href="/my-super-post.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/gccpacman">My Github</a></li>
                            <li><a href="https://stackoverflow.com/users/4124310/realhu">My StackOverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>